"use strict";(self.webpackChunkgoit_test_task=self.webpackChunkgoit_test_task||[]).push([[38],{9038:function(n,e,t){t.r(e),t.d(e,{default:function(){return on}});var r,o,i,a,u,s,c,l,d,p,f,x=t(3433),h=t(9439),g=t(1413),b=t(5987),v=t(2791),w=t(1686),m=t(1124),k=t(184),Z=["selected","loading","type","following","children","onClick"],y=function(n){n.selected;var e=n.loading,t=void 0!==e&&e,r=n.type,o=void 0===r?"button":r,i=n.following,a=void 0!==i&&i,u=n.children,s=n.onClick,c=(0,b.Z)(n,Z);return(0,k.jsx)(m.Z,(0,g.Z)((0,g.Z)({type:o,loading:t,loadingPosition:"end",endDecorator:t?(0,k.jsx)(w.Z,{}):null,variant:"solid",sx:{backgroundColor:a?"#5CD3A8 ":"#EBD8FF",color:"#373737",transition:"background-color 250ms linear",":hover":{bgcolor:"#7b2ec6",color:"#fff"}},onClick:function(n){!t&&s&&s(n)}},c),{},{children:u}))},j=y,L=t(168),C=t(9434),F=t(7691),S=t(2330),E=t(6895),O=function(n){return n.followedUsers.items},D=function(n){return n.filters.status},A=F.default.div(r||(r=(0,L.Z)(["\n  position: relative;\n  display: inline-block;\n"]))),G=F.default.button(o||(o=(0,L.Z)(["\n  background-color: #4caf50;\n  color: white;\n  padding: 10px;\n  font-size: 16px;\n  border: none;\n  cursor: pointer;\n"]))),H=F.default.div(i||(i=(0,L.Z)(["\n  display: ",";\n  position: absolute;\n  background-color: #f9f9f9;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n"])),(function(n){return n.open?"block":"none"})),I=F.default.div(a||(a=(0,L.Z)(["\n  color: black;\n  padding: 12px 16px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f1f1f1;\n  }\n"]))),q=function(){var n=(0,v.useState)(!1),e=(0,h.Z)(n,2),t=e[0],r=e[1],o=(0,v.useRef)(null),i=(0,C.I0)(),a=(0,C.v9)(D),u=function(n){i((0,E.b)(n)),r(!1)},s=function(n){o.current&&!o.current.contains(n.target)&&r(!1)};return(0,v.useEffect)((function(){return document.addEventListener("click",s),function(){document.removeEventListener("click",s)}}),[]),(0,k.jsxs)(A,{ref:o,children:[(0,k.jsx)(G,{onClick:function(){r(!t)},children:a}),(0,k.jsxs)(H,{open:t,children:[(0,k.jsx)(I,{onClick:function(){return u(S.H.all)},children:"Show All"}),(0,k.jsx)(I,{onClick:function(){return u(S.H.follow)},children:"Follow"}),(0,k.jsx)(I,{onClick:function(){return u(S.H.followings)},children:"Followings"})]})]})},z=t(5861),N=t(4687),W=t.n(N),_=F.default.li(u||(u=(0,L.Z)(["\n  position: relative;\n  width: 380px;\n  height: 460px;\n  background-color: pink;\n\n  background: linear-gradient(\n    114.99deg,\n    #471ca9 -0.99%,\n    #5736a3 54.28%,\n    #4b2a99 78.99%\n  );\n  box-shadow: -2.5777px 6.87386px 20.6216px rgba(0, 0, 0, 0.23);\n  border-radius: 20px;\n"]))),B=(F.default.p(s||(s=(0,L.Z)(['\n  font-family: "Montserrat";\n\n  font-weight: 500;\n  font-size: 20px;\n  line-height: 1, 2;\n  text-transform: uppercase;\n\n  color: #ebd8ff;\n']))),F.default.div(c||(c=(0,L.Z)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 80px;\n  height: 80px;\n\n  background: rgb(235, 216, 255);\n  box-shadow: rgba(0, 0, 0, 0.06) 0px 4.39163px 4.39163px,\n    rgb(174, 123, 227) 0px -2.19582px 4.39163px inset,\n    rgb(251, 248, 255) 0px 4.39163px 3.29372px inset;\n  clip-path: circle(40px at center);\n  border-radius: 50%;\n"])))),K=F.default.img(l||(l=(0,L.Z)(["\n  position: absolute;\n  transform: translate(-50%, -50%);\n  left: 50%;\n  top: 50%;\n  width: 62px;\n  height: 62px;\n  border-radius: 50%;\n"]))),R=F.default.div(d||(d=(0,L.Z)(["\n  position: absolute;\n  transform: translate(0, -50%);\n  left: 0px;\n  top: 50%;\n  width: 380px;\n  height: 8px;\n  background: rgb(235, 216, 255);\n  box-shadow: rgba(0, 0, 0, 0.06) 0px 3.43693px 3.43693px,\n    rgb(174, 123, 227) 0px -1.71846px 3.43693px inset,\n    rgb(251, 248, 255) 0px 3.43693px 2.5777px inset;\n  z-index: 0;\n"]))),M=F.default.div(p||(p=(0,L.Z)(["\n  display: flex;\n  gap: 16px;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  margin-bottom: 26px;\n"]))),Q=F.default.div(f||(f=(0,L.Z)(["\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n\n  width: 208px;\n  bottom: 36px;\n  left: 50%;\n  transform: translate(-50%, 0);\n"]))),T=t(1243);T.Z.defaults.baseURL="https://641b2a469b82ded29d4bddd7.mockapi.io";var U,P=function(){var n=(0,z.Z)(W().mark((function n(){var e;return W().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.Z.get("/users");case 3:return e=n.sent,n.abrupt("return",e.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),X=function(){var n=(0,z.Z)(W().mark((function n(e){var t;return W().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.Z.put("/users/".concat(e.id),{followers:e.followers+1});case 3:return t=n.sent,n.abrupt("return",t.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),J=function(){var n=(0,z.Z)(W().mark((function n(e){var t;return W().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.Z.put("/users/".concat(e.id),{followers:e.followers-1});case 3:return t=n.sent,n.abrupt("return",t.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),V=t(6403),Y=t(3418),$=t(4477),nn=function(n){var e=n.user,t=n.following,r=(0,V.NL)(),o=(0,C.I0)(),i=(0,v.useState)(!1),a=(0,h.Z)(i,2),u=a[0],s=a[1],c=(0,Y.D)({mutationFn:X,onSuccess:function(){o((0,$.mX)(e)),r.invalidateQueries({queryKey:["users"]})}}),l=(0,Y.D)({mutationFn:J,onSuccess:function(){o((0,$.Fg)(e.id)),r.invalidateQueries({queryKey:["users"]})}}),d=function(){var n=(0,z.Z)(W().mark((function n(){return W().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0),n.prev=1,n.next=4,c.mutateAsync(e);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.error("Error adding follower:",n.t0);case 9:return n.prev=9,s(!1),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(){return n.apply(this,arguments)}}(),p=function(){var n=(0,z.Z)(W().mark((function n(){return W().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0),n.prev=1,n.next=4,l.mutateAsync(e);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.error("Error deleting follower:",n.t0);case 9:return n.prev=9,s(!1),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(){return n.apply(this,arguments)}}();return(0,k.jsxs)(_,{children:[(0,k.jsx)(R,{}),(0,k.jsx)(B,{children:(0,k.jsx)(K,{src:e.avatar,alt:"user avatar"})}),(0,k.jsxs)(Q,{children:[(0,k.jsxs)(M,{children:[(0,k.jsxs)("p",{children:[e.tweets.toLocaleString("en-GB")," TWEETS"]}),(0,k.jsxs)("p",{children:[e.followers.toLocaleString("en-GB")," FOLLOWERS"]})]}),t?(0,k.jsx)(j,{type:"button",onClick:p,following:t,loading:u,children:u?"LOADING":"FOLLOWING"}):(0,k.jsx)(j,{type:"button",onClick:d,following:t,loading:u,children:u?"LOADING":"FOLLOW"})]})]})},en=t(7691).default.ul(U||(U=(0,L.Z)(["\n  display: flex;\n  gap: 10px;\n  margin: 0 auto;\n\n  flex-direction: column;\n"]))),tn=function(n){var e=n.users,t=(0,C.v9)(O),r=function(n){return t.some((function(e){return e.id===n.id}))};return e&&(0,k.jsx)(en,{children:e.map((function(n){return(0,k.jsx)(nn,{user:n,following:r(n)},n.id)}))})},rn=t(5530);var on=function(){var n=(0,rn.a)({queryKey:["users"],queryFn:P}).data,e=void 0===n?[]:n,t=(0,C.v9)(D),r=function(n,e,t){switch(t){case S.H.follow:return n.filter((function(n){return!e.some((function(e){return e.id===n.id}))}));case S.H.followings:return n.filter((function(n){return e.some((function(e){return e.id===n.id}))}));default:return n}}(e,(0,C.v9)(O),t),o=(0,v.useState)(1),i=(0,h.Z)(o,2),a=i[0],u=i[1],s=(0,x.Z)(r).splice(0,3*a),c=Math.ceil(r.length/3);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(q,{}),(0,k.jsx)(tn,{users:s}),(0,k.jsx)(y,{type:"button",onClick:function(){a>=c||u((function(n){return n+1}))},children:"Load more"})]})}}}]);
//# sourceMappingURL=38.84645296.chunk.js.map