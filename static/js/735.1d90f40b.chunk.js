"use strict";(self.webpackChunkgoit_test_task=self.webpackChunkgoit_test_task||[]).push([[735],{6735:function(n,e,r){r.r(e),r.d(e,{default:function(){return I}});var t,o,s,u,a=r(3433),c=r(9439),i=r(1413),l=r(4925),f=r(168),d=r(6444),p=d.default.button(t||(t=(0,f.Z)(["\n  display: inline-flex;\n  padding: 8px 12px;\n  border-radius: 4px;\n  border: none;\n  font: inherit;\n  cursor: pointer;\n  background-color: #ebd8ff;\n  color: inherit;\n\n  /* .btn.isSelected {\n  background-color: #1976d2;\n  color: #fff;\n} */\n\n  :hover {\n    background-color: #1976d2;\n    color: #fff;\n  }\n\n  /* :active {\n    background-color: #1565c0;\n    color: #fff;\n  } */\n"]))),x=r(184),h=["selected","type","children"],v=function(n){n.selected;var e=n.type,r=void 0===e?"button":e,t=n.children,o=(0,l.Z)(n,h);return(0,x.jsx)(p,(0,i.Z)((0,i.Z)({type:r},o),{},{children:t}))},b=r(2791),g=d.default.li(o||(o=(0,f.Z)(["\n  width: 380px;\n  height: 460px;\n  background-color: pink;\n"]))),w=(d.default.p(s||(s=(0,f.Z)(['\n  font-family: "Montserrat";\n\n  font-weight: 500;\n  font-size: 20px;\n  line-height: 1, 2;\n  text-transform: uppercase;\n\n  color: #ebd8ff;\n']))),d.default.div(u||(u=(0,f.Z)(["\n  /* width: 80px;\n  height: 80px;\n\n  border-width: 9px;\n  border-radius: 50%;\n\n  box-shadow: 0px 4.39163px 4.39163px rgba(0, 0, 0, 0.06),\n    inset 0px -2.19582px 4.39163px #ae7be3,\n    inset 0px 4.39163px 3.29372px #fbf8ff; */\n"])))),m=r(5861),k=r(7757),y=r.n(k),Z=r(1243);Z.Z.defaults.baseURL="https://641b2a469b82ded29d4bddd7.mockapi.io";var j,L=function(){var n=(0,m.Z)(y().mark((function n(){var e;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Z.Z.get("/users");case 3:return e=n.sent,n.abrupt("return",e.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),F=function(){var n=(0,m.Z)(y().mark((function n(e){var r;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("user:",e),n.prev=1,n.next=4,Z.Z.put("/users/".concat(e.id),{followers:e.followers+1});case 4:return r=n.sent,console.log("res:",r.data),n.abrupt("return",r.data);case 9:return n.prev=9,n.t0=n.catch(1),n.abrupt("return",n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),O=function(){var n=(0,m.Z)(y().mark((function n(e){var r;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Z.Z.put("/users/".concat(e.id),{followers:e.followers-1});case 3:return r=n.sent,n.abrupt("return",r.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),S=r(6403),C=r(3418),U=r(4477),q=r(9434),E=function(n){var e=n.user,r=n.following;console.log("following:",r);var t=(0,S.NL)(),o=(0,q.I0)(),s=(0,C.D)({mutationFn:F,onSuccess:function(){o((0,U.mX)(e)),t.invalidateQueries({queryKey:["users"]})}}),u=(0,C.D)({mutationFn:O,onSuccess:function(){o((0,U.Fg)(e.id)),t.invalidateQueries({queryKey:["users"]})}});return(0,x.jsxs)(g,{children:[(0,x.jsx)("p",{children:e.user}),(0,x.jsx)("div",{children:(0,x.jsx)("img",{src:e.awatar,alt:"user avatar"})}),(0,x.jsxs)("p",{children:[e.tweets," TWEETS"]}),(0,x.jsxs)("p",{children:[e.followers," FOLLOWERS"]}),(0,x.jsx)(w,{}),r?(0,x.jsx)(v,{type:"button",onClick:function(){u.mutate(e)},children:"FOLLOWING"}):(0,x.jsx)(v,{type:"button",onClick:function(){s.mutate(e)},children:"FOLLOW"})]})},W=r(6444).default.ul(j||(j=(0,f.Z)(["\n  display: flex;\n  gap: 10px;\n  margin: 0 auto;\n\n  flex-direction: column;\n"]))),_=function(n){return n.followedUsers.items},K=function(n){var e=n.users;console.log("visibleUsers:",e);var r=(0,q.v9)(_);console.log("followedUsers:",r),(0,b.useEffect)((function(){console.log("UsersList")}));var t=function(n){return r.some((function(e){return e.id===n.id}))};return e&&(0,x.jsx)(W,{children:e.map((function(n){return(0,x.jsx)(E,{user:n,following:t(n)},n.id)}))})},D=r(5530);var I=function(){var n=(0,D.a)({queryKey:["users"],queryFn:L}).data,e=void 0===n?[]:n,r=(0,b.useState)(1),t=(0,c.Z)(r,2),o=t[0],s=t[1],u=(0,a.Z)(e).splice(0,3*o),i=Math.ceil(e.length/3);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(K,{users:u}),(0,x.jsx)(v,{type:"button",onClick:function(){o>=i||s((function(n){return n+1}))},children:"Load more"})]})}}}]);
//# sourceMappingURL=735.1d90f40b.chunk.js.map