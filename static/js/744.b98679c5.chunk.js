"use strict";(self.webpackChunkgoit_test_task=self.webpackChunkgoit_test_task||[]).push([[744],{744:function(n,e,r){r.r(e),r.d(e,{default:function(){return J}});var t,o,u,i,c,s,a,l,f=r(3433),d=r(9439),p=r(1413),x=r(4925),h=r(168),b=r(6444),v=b.default.button(t||(t=(0,h.Z)(["\n  display: inline-flex;\n  padding: 8px 12px;\n  border-radius: 4px;\n  border: none;\n  font: inherit;\n  cursor: pointer;\n  background-color: #ebd8ff;\n  color: inherit;\n\n  /* .btn.isSelected {\n  background-color: #1976d2;\n  color: #fff;\n} */\n\n  :hover {\n    background-color: #1976d2;\n    color: #fff;\n  }\n\n  /* :active {\n    background-color: #1565c0;\n    color: #fff;\n  } */\n"]))),g=r(184),w=["selected","type","children"],k=function(n){n.selected;var e=n.type,r=void 0===e?"button":e,t=n.children,o=(0,x.Z)(n,w);return(0,g.jsx)(v,(0,p.Z)((0,p.Z)({type:r},o),{},{children:t}))},m=r(2791),j=r(9434),Z=r(2330),y=r(6895),L=function(n){return n.followedUsers.items},F=function(n){return n.filters.status},C=b.default.div(o||(o=(0,h.Z)(["\n  position: relative;\n  display: inline-block;\n"]))),S=b.default.button(u||(u=(0,h.Z)(["\n  background-color: #4caf50;\n  color: white;\n  padding: 10px;\n  font-size: 16px;\n  border: none;\n  cursor: pointer;\n"]))),E=b.default.div(i||(i=(0,h.Z)(["\n  display: ",";\n  position: absolute;\n  background-color: #f9f9f9;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n"])),(function(n){return n.open?"block":"none"})),O=b.default.div(c||(c=(0,h.Z)(["\n  color: black;\n  padding: 12px 16px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f1f1f1;\n  }\n"]))),H=function(){var n=(0,m.useState)(!1),e=(0,d.Z)(n,2),r=e[0],t=e[1],o=(0,m.useRef)(null),u=(0,j.I0)(),i=(0,j.v9)(F),c=function(n){u((0,y.b)(n)),t(!1)},s=function(n){o.current&&!o.current.contains(n.target)&&t(!1)};return(0,m.useEffect)((function(){return document.addEventListener("click",s),function(){document.removeEventListener("click",s)}}),[]),(0,g.jsxs)(C,{ref:o,children:[(0,g.jsx)(S,{onClick:function(){t(!r)},children:i}),(0,g.jsxs)(E,{open:r,children:[(0,g.jsx)(O,{onClick:function(){return c(Z.H.all)},children:"Show All"}),(0,g.jsx)(O,{onClick:function(){return c(Z.H.follow)},children:"Follow"}),(0,g.jsx)(O,{onClick:function(){return c(Z.H.followings)},children:"Followings"})]})]})},q=b.default.li(s||(s=(0,h.Z)(["\n  width: 380px;\n  height: 460px;\n  background-color: pink;\n"]))),W=(b.default.p(a||(a=(0,h.Z)(['\n  font-family: "Montserrat";\n\n  font-weight: 500;\n  font-size: 20px;\n  line-height: 1, 2;\n  text-transform: uppercase;\n\n  color: #ebd8ff;\n']))),b.default.div(l||(l=(0,h.Z)(["\n  /* width: 80px;\n  height: 80px;\n\n  border-width: 9px;\n  border-radius: 50%;\n\n  box-shadow: 0px 4.39163px 4.39163px rgba(0, 0, 0, 0.06),\n    inset 0px -2.19582px 4.39163px #ae7be3,\n    inset 0px 4.39163px 3.29372px #fbf8ff; */\n"])))),_=r(5861),z=r(4687),I=r.n(z),K=r(1243);K.Z.defaults.baseURL="https://641b2a469b82ded29d4bddd7.mockapi.io";var R,D=function(){var n=(0,_.Z)(I().mark((function n(){var e;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,K.Z.get("/users");case 3:return e=n.sent,n.abrupt("return",e.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),M=function(){var n=(0,_.Z)(I().mark((function n(e){var r;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("user:",e),n.prev=1,n.next=4,K.Z.put("/users/".concat(e.id),{followers:e.followers+1});case 4:return r=n.sent,console.log("res:",r.data),n.abrupt("return",r.data);case 9:return n.prev=9,n.t0=n.catch(1),n.abrupt("return",n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),N=function(){var n=(0,_.Z)(I().mark((function n(e){var r;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,K.Z.put("/users/".concat(e.id),{followers:e.followers-1});case 3:return r=n.sent,n.abrupt("return",r.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),Q=r(6403),T=r(3418),U=r(4477),A=function(n){var e=n.user,r=n.following,t=(0,Q.NL)(),o=(0,j.I0)(),u=(0,T.D)({mutationFn:M,onSuccess:function(){o((0,U.mX)(e)),t.invalidateQueries({queryKey:["users"]})}}),i=(0,T.D)({mutationFn:N,onSuccess:function(){o((0,U.Fg)(e.id)),t.invalidateQueries({queryKey:["users"]})}});return(0,g.jsxs)(q,{children:[(0,g.jsx)("p",{children:e.user}),(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:e.awatar,alt:"user avatar"})}),(0,g.jsxs)("p",{children:[e.tweets," TWEETS"]}),(0,g.jsxs)("p",{children:[e.followers," FOLLOWERS"]}),(0,g.jsx)(W,{}),r?(0,g.jsx)(k,{type:"button",onClick:function(){i.mutate(e)},children:"FOLLOWING"}):(0,g.jsx)(k,{type:"button",onClick:function(){u.mutate(e)},children:"FOLLOW"})]})},G=r(6444).default.ul(R||(R=(0,h.Z)(["\n  display: flex;\n  gap: 10px;\n  margin: 0 auto;\n\n  flex-direction: column;\n"]))),X=function(n){var e=n.users,r=(0,j.v9)(L),t=function(n){return r.some((function(e){return e.id===n.id}))};return e&&(0,g.jsx)(G,{children:e.map((function(n){return(0,g.jsx)(A,{user:n,following:t(n)},n.id)}))})},B=r(5530);var J=function(){var n=(0,B.a)({queryKey:["users"],queryFn:D}).data,e=void 0===n?[]:n,r=(0,j.v9)(F),t=function(n,e,r){switch(r){case Z.H.follow:return n.filter((function(n){return!e.some((function(e){return e.id===n.id}))}));case Z.H.followings:return n.filter((function(n){return e.some((function(e){return e.id===n.id}))}));default:return n}}(e,(0,j.v9)(L),r),o=(0,m.useState)(1),u=(0,d.Z)(o,2),i=u[0],c=u[1],s=(0,f.Z)(t).splice(0,3*i),a=Math.ceil(t.length/3);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(H,{}),(0,g.jsx)(X,{users:s}),(0,g.jsx)(k,{type:"button",onClick:function(){i>=a||c((function(n){return n+1}))},children:"Load more"})]})}}}]);
//# sourceMappingURL=744.b98679c5.chunk.js.map